@model VgSalud.Models.E_Carnet_Sanitario

@{
    ViewBag.Title = "RegistroCarnet";
    var listadoEspecialidad = (SelectList)ViewBag.listadoEspecialidad;
    var listadoServicios = (SelectList)ViewBag.listadoServicios;
    var listadoMedico = (SelectList)ViewBag.listadoMedico;
    var listadoTarifa = (SelectList)ViewBag.listadoTarifa;
    var listadoDetalleAtencion = (List<VgSalud.Models.E_AtencionVarias_Detalle>)ViewBag.listadoDetalleAtencion;
    var cuenta = ViewBag.cuenta;
    var listadoCuenta = (SelectList)ViewBag.listadoCuenta;
    VgSalud.Controllers.AccesoController ac = new VgSalud.Controllers.AccesoController();
    string CodUsu = Session["UserID"].ToString();

    var esp = (List<VgSalud.Models.E_Especialidades>)ViewBag.esp;
    var ser = (List<VgSalud.Models.E_Servicios>)ViewBag.ser;
    var tar = (List<VgSalud.Models.E_Tarifario>)ViewBag.tar;
    var med = (List<VgSalud.Models.E_Medico>)ViewBag.med;
    var tiptar = (List<VgSalud.Models.E_Tipo_Tarifa>)ViewBag.tiptar;

    var listadoTipCarnet = (SelectList)ViewBag.listadoTipCarnet;



    var listadoTari = (SelectList)ViewBag.listadoTari;

}

<script languaje = "javascript" type="text/javascript">

    $(document).ready(function () {

        //$('#btnSIManipulado').clik(function () {
        //    //alert("SI");
        //    $('#btnSIManipulado').addClass("btn btn-primary");
        //});

        @*var mensajito = '@ViewBag.activaAlerta';
        var historia = '@ViewBag.historia';
        var cuenta = '@ViewBag.cuenta';
        $('#boton').attr("disabled", false);
        if (mensajito == 1) {
            $("#yaRegistro").css("display", "none");
            Command: toastr["success"]("¿Desea seguir agregando mas atenciones?<br /><br /><a href='../../AtencionVarias/RegistroAtenciones/?historia=" + historia + "&cuenta=" + cuenta + "' class='btn clear'>Si</a> <a href='../../Cuentas/VerificaCuenta/" + cuenta + "' class='btn clear'>No</a>", "Registro exitoso")

            toastr.options = {
                "closeButton": false,
                "debug": false,
                "newestOnTop": false,
                "progressBar": false,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "3000000",
                "hideDuration": "1000000",
                "timeOut": 0,
                "extendedTimeOut": 0,
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut",
                "tapToDismiss": false
            }
        }*@
    });

</script>

<div class="content-wrapper">
    <section class="content-header">
        <h1>Carnet Sanitario </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-users"></i>Atención</a></li>
            <li class="active">Registrar Carnet</li>
        </ol>
    </section>
    <section class="content" id="yaRegistro">
        <div class="box box-default">
            <div class="box-header with-border">
                <h3 class="box-title">Registrar Carnet</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                    <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
                </div>
            </div>
            <div class="box-header">
                @{
                    <div style="float:left; padding:0% 1% 0 1%" title="ALT + A">
                        <a href="~/Pacientes/ListaPacientes">
                            <center style="MARGIN-LEFT: 28PX;"><i class="fa fa-arrow-circle-left" style="font-size:25px; color:#13D003"></i><br><strong style="color:black">Atras</strong></center>
                        </a>
                    </div>
                }
            </div>


            <div class="box-body">

                <form method="post" action="~/Carnet/RegistroCarnet" enctype="multipart/form-data">
                    <input type="hidden" name="Historia" value="@Model.Historia" />
                    <div class="col-md-12">
                        <div class="col-md-5 col-md-offset-1">
                            <div  class="row">
                                <div class="form-group">
                                    <div class="col-md-3">
                                        <label>Tarifa</label>
                                    </div>
                                    <div class="col-md-9">
                                        @Html.DropDownList("CodTar", listadoTari, "[SELECCIONE TARIFA]", new { @class = "form-control select2", @style = "width:100%" ,@id="codtar"})

                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="form-group">
                                    <div class="col-md-3">
                                        <label>Tipo de carnet</label>
                                    </div>
                                    <div class="col-md-9">
                                        <div class="form-group">
                                            <div class="col-xs-12 col-md-3">
                                                <label style="font-size:large;color:coral"><input type="radio" value="2" name="TipoCarnet" style="width:18px;height:18px;"> NORMAL</label>
                                            </div>
                                            <div class="col-xs-12 col-md-4">
                                                <label style="font-size:large;color:coral"><input type="radio" value="1" name="TipoCarnet" style="width:18px;height:18px;"> ADULTO MAYOR</label>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>

                            @*<div class="row">
                                <div class="form-group">
                                    <div class="col-md-3">
                                        <label>Tipo de carnet</label>
                                    </div>
                                    <div class="col-md-9">
                                        @Html.DropDownList("TipoCarnet", listadoTipCarnet, "[SELECCIONE TIPO CARNET]", new { @class = "form-control select2", @style = "width:100%" })

                                    </div>
                                </div>
                            </div>*@
                                
                            <div class="row">
                                <div class="form-group">
                                    <div class="col-md-3">
                                        <label>Manipulador</label>
                                    </div>
                                    <div class="col-md-9">
                                        <div class="form-group">
                                            <div class="col-md-3">
                                                <label style="font-size:large;color:coral"><input type="radio" value="SI" name="Manipulador" style="width:18px;height:18px;"> SI</label>
                                            </div>
                                            <div class="col-md-3">
                                                <label style="font-size:large;color:coral"><input type="radio" value="NO" name="Manipulador" style="width:18px;height:18px;"> NO</label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>

                            <div class="row">
                                <div class="form-group">
                                    <div class="col-md-3">
                                        <label>Campaña</label>
                                    </div>
                                    <div class="col-md-9">
                                        <div class="form-group">
                                            <div class="col-md-3">
                                                <label style="font-size:large;color:coral"><input type="radio" value="SI" name="Campana" style="width:18px;height:18px;"> SI</label>
                                            </div>
                                            <div class="col-md-3">
                                                <label style="font-size:large;color:coral"><input type="radio" value="NO" name="Campana" style="width:18px;height:18px;"> NO</label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>

                            <div class="row">
                                <div class="form-group">
                                    <div class="col-md-3">
                                        <label>Empresa</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control" name="Empresa" />

                                    </div>
                                </div>
                            </div>

                            <input type="hidden" name="EstadoCarnet" value="TRAMITE" />
                            @*<div class="row" style="display:none">
                                <div class="form-group">
                                    <div class="col-md-3">
                                        <label>Estado de carnet</label>
                                    </div>
                                    <div class="col-md-9">
                                        <select name="EstadoCarnet" style="width:400px;height:35px;">
                                            <option value="TRAMITE">TRAMITE</option>
                                            <option value="ENTREGADO">ENTREGADO</option>
                                        </select>
                                    </div>
                                </div>
                            </div>*@

                            <div class="row">
                                <div class="form-group">
                                    <div class="col-md-3">
                                        <label>Fecha de Vencimiento</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control datepicker" name="FechaVencimiento" /> <!-- class="form-control datepicker" -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            @*<div class="row" style="display:none">
                                <div class="form-group">
                                    <div class="col-md-3">
                                        <label>Fecha de recojo</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control datepicker" name="FecRecojo" />

                                    </div>
                                </div>
                            </div>*@

                            

                            @*<div class="row" style="display:none">
                                <div class="form-group">
                                    <div class="col-md-3">
                                        <label>QR</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control" name="QR" />

                                    </div>
                                </div>
                            </div>*@

                            @*<div class="row" style="display:none">
                                <div class="form-group">
                                    <div class="col-md-3">
                                        <label>Campaña</label>
                                    </div>
                                    <div class="col-md-9">
                                        <select name="Campana" style="width:400px;height:35px;">
                                            <option value="SI">SI</option>
                                            <option value="NO">NO</option>
                                        </select>

                                    </div>
                                </div>
                            </div>*@
                            
                            @*<div class="row" style="display:none">
                                <div class="form-group">
                                    <div class="col-md-3">
                                        <label>Manipulador</label>
                                    </div>
                                    <div class="col-md-9">
                                        <select name="Manipulador" style="width:400px;height:35px;">
                                            <option value="SI">SI</option>
                                            <option value="NO">NO</option>
                                        </select>

                                    </div>
                                </div>
                            </div>*@

                            @*<div class="row" style="display:none">
                                <div class="form-group">
                                    <div class="col-md-3">
                                        <label>Fecha de vencimiento</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control datepicker" name="FecVencimiento" />

                                    </div>
                                </div>
                            </div>*@
                                
                            <div class="panel panel-warning" style="border:2px solid coral;height:217px;">
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="col-md-4">
                                                    <table>
                                                        <tr>
                                                            <td>
                                                                <label>Seleccione Foto de Carnet</label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                @Html.TextBoxFor(model => model.FotoCarnet, new { type = "file", @id = "file-input" })
                                                                @Html.ValidationMessageFor(model => model.FotoCarnet, "", new { @class = "text-danger" })
                                                            </td>
                                                        </tr>
                                                    </table>                                                    
                                                </div>
                                                <div class="col-md-3 col-md-offset-3">
                                                    <img id="imgSalida" width="200px" height="190px" src="" />
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                            
                                

                        </div>
                    </div>
                    <div class="col-md-12" style="margin-top:2%;">
                        <center>
                            <input type="submit" class="btn btn-danger" value="Guardar" style="background-color:#13D003;border:0px" />
                        </center>
                    </div>

                </form>
            </div>




        </div>


    </section>
</div>


<script type="text/javascript" language="javascript">
    $(window).load(function () {

        //$("input[name=TipoCarnetS]").click(function () {
        //    $("input[name=TipoCarnetS]").css('border', '1px solid red');
        //    $('#TipoCarnet').css("background-color", "red");
        //});

        $(function () {
            $('#file-input').change(function (e) {
                addImage(e);
            });

            function addImage(e) {
                var file = e.target.files[0],
                imageType = /image.*/;

                if (!file.type.match(imageType))
                    return;

                var reader = new FileReader();
                reader.onload = fileOnload;
                reader.readAsDataURL(file);
            }

            function fileOnload(e) {
                var result = e.target.result;
                $('#imgSalida').attr("src", result);
            }


            //function Prueba() {
            //    alert("SI");
            //    $('#btnSIManipulado').css("btn btn-primary");
            //    $('#btnNoManipulado').css("btn btn-default");

            //}

        });
    });
</script>


