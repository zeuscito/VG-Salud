
@{
    ViewBag.Title = "ListaCuentaEstado";
}

<div class="content-wrapper">
    <section class="content-header">
        <h1>Lista de Cuentas de : <b style="color:coral">@ViewBag.nombrecompleto</b> </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-users"></i>Lista de Cuentas</a></li>
            <li class="active">Listado de Cuentas</li>
        </ol>
    </section>
    <section class="content">
        <div class="box box-default">

            <div class="box-header">
                <div style="float:left; padding:0% 1% 0 1%" title="ALT + A">
                    <a href="../Pacientes/ListaPacientes">
                        <center><i class="fa fa-arrow-circle-left" style="font-size:25px; color:#13D003"></i><br><strong style="color:black">Atras</strong></center>
                    </a>
                </div>
            </div>

             <div class="box-body">
                <fieldset>
                    <legend style="margin-left:10px">Filtros</legend>
                    <div class="col-md-12">

                        <div class="col-md-2">
                        </div>
                        <div class="col-md-2">
                            <label class="checkbox-inline"><input type="checkbox" value="G" class="Generado">&nbsp;&nbsp;<strong>Generado</strong></label>
                        </div>
                        <div class="col-md-2">
                            <label class="checkbox-inline"><input type="checkbox" value="F" class="Facturado">&nbsp;&nbsp;<strong>Facturado</strong></label>
                        </div>
                        <div class="col-md-2">
                            <label class="checkbox-inline"><input type="checkbox" value="A" class="Cancelado">&nbsp;&nbsp;<strong>Anulado</strong></label>
                        </div>

                        <div class="col-md-2">
                            <label class="checkbox-inline"><input type="checkbox" value="L" class="Liquidado">&nbsp;&nbsp;<strong>Liquidado</strong></label>
                        </div>


                        <div class="col-md-2">
                        </div>


                    </div>
                </fieldset>
                <br />

                <div class="box-body">
                    <fieldset>
                        <legend>Lista</legend>
                        <div style="overflow:scroll;overflow-x:hidden;height:70vh;width:100%">
                            <table class="table table-bordered table-striped">
                                <thead>
                                    <tr class="headTabla">
                                        <th>Fecha</th>
                                        <th>Servicio</th>
                                        <th>Tarifa</th>
                                        <th>Cantidad</th>
                                        <th>Total</th>
                                        <th>Estado</th>
                                    </tr>
                                </thead>
                                <tbody id="detalle"></tbody>

                            </table>
                        </div>
                
                    </fieldset>

                </div>


                <div class="col-md-12">

                </div>

            </div>
        </div>
    </section>
</div>

<script>

    $(document).ready(function () {

     

        var historia = @ViewBag.historia;

        $(".odd").removeClass();
        $(".dataTables_empty").removeClass();
        var F = "";
        var G = "";
        var L = "";
        var C = "";

        $(".Facturado").prop("checked", true).change();
        F = "F";
        $.get('@Url.Action("CuentaEstado", "Cuentas")', {id:historia , F: F, G: G, L: L, C: C },
            function (response) {
                $("#detalle").empty();
                $("#detalle").append(response);
            });

        $(".Generado").change(function () {

            if (this.checked == true) {
                G = "G";
                $.get('@Url.Action("CuentaEstado", "Cuentas")', {id:historia, F: F, G: G, L: L, C: C },
                    function (response) {
                        $("#detalle").empty();
                        $("#detalle").append(response);
                    });
            } else {
                G = null;
                $.get('@Url.Action("CuentaEstado", "Cuentas")', {id:historia, F: F, G: G, L: L, C: C },
                 function (response) {

                     $("#detalle").empty();
                     $("#detalle").append(response);
                 });
            }
        });
        $(".Facturado").change(function () {

            if (this.checked == true) {
                F = "F";
                $.get('@Url.Action("CuentaEstado", "Cuentas")', {id:historia, F: F, G: G, L: L, C: C },
                    function (response) {
                        $("#detalle").empty();
                        $("#detalle").append(response);
                    });
            } else {
                F = null;
                $.get('@Url.Action("CuentaEstado", "Cuentas")', {id:historia, F: F, G: G, L: L, C: C },
                 function (response) {
                     $("#detalle").empty();
                     $("#detalle").append(response);
                 });
            }
        });

        $(".Cancelado").change(function () {

            if (this.checked == true) {
                C = "C";
                $.get('@Url.Action("CuentaEstado", "Cuentas")', {id:historia, F: F, G: G, L: L, C: C },
                    function (response) {
                        $("#detalle").empty();
                        $("#detalle").append(response);
                    });
            } else {
                C = null;
                $.get('@Url.Action("CuentaEstado", "Cuentas")', {id:historia, F: F, G: G, L: L, C: C },
                 function (response) {
                     $("#detalle").empty();
                     $("#detalle").append(response);
                 });
            }
        });

        $("Liquidado").change(function () {

            if (this.checked == true) {
                L = "L";
                $.get('@Url.Action("CuentaEstado", "Cuentas")', {id:historia, F: F, G: G, L: L, C: C },
                    function (response) {
                        $("#detalle").empty();
                        $("#detalle").append(response);
                    });
            } else {
                L = null;
                $.get('@Url.Action("CuentaEstado", "Cuentas")', {id:historia, F: F, G: G, L: L, C: C },
                 function (response) {
                     $("#detalle").empty();
                     $("#detalle").append(response);
                 });
            }
        });
     


    });

</script>




