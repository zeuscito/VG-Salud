@model VgSalud.Models.E_Estadistica

@{
    ViewBag.Title = "EstadisticaFacturacionXMes";
    var totalxmes = (List<VgSalud.Models.E_Estadistica>)ViewBag.totalxmes;
    var totpacientesxmes = (List<VgSalud.Models.E_Estadistica>)ViewBag.totpacientesxmes;
    var FacturacionXTipoTarifa = (List<VgSalud.Models.E_Estadistica>)ViewBag.FacturacionXTipoTarifa;
    var ListatipTar = (List<VgSalud.Models.E_Estadistica>)ViewBag.ListatipTar;
    var ListaDiasTar = (List<VgSalud.Models.E_Estadistica>)ViewBag.ListaDiasTar;
    var ListaDiasSexo = (List<VgSalud.Models.E_Estadistica>)ViewBag.ListaDiasSexo;
    var ListaSexo = (List<VgSalud.Models.E_Estadistica>)ViewBag.ListaSexos;
    var FacturacionXPacienteXSexo = (List<VgSalud.Models.E_Estadistica>)ViewBag.FacturacionXPacienteXSexo;
    var turno = (List<VgSalud.Models.E_Estadistica>)ViewBag.turno;
    var FacturacionXDiasXturno = (List<VgSalud.Models.E_Estadistica>)ViewBag.FacturacionXDiasXturno;
    var FacturacionXTotalXturnoPacientes = (List<VgSalud.Models.E_Estadistica>)ViewBag.FacturacionXTotalXturnoPacientes;

    var ListaVentasTipoTarifa = (List<VgSalud.Models.E_Estadistica>)ViewBag.ListaVentasTipoTarifa;

}

<link href="~/css/export.css" rel="stylesheet" />
<script src="~/js/chart.js"></script>
<script src="~/plugins/chartjs/pieAmcharts.js"></script>
<script src="~/plugins/chartjs/light.js"></script>
<style>
    #chartData {
        width: 100%;
        margin: 0 0 0 0;
        margin-top: 10vh;
        float: right;
        border-collapse: collapse;
        box-shadow: 0 0 1em rgba(0, 0, 0, 0.5);
        -moz-box-shadow: 0 0 1em rgba(0, 0, 0, 0.5);
        -webkit-box-shadow: 0 0 1em rgba(0, 0, 0, 0.5);
        background-position: 0 -100px;
        padding-top: 10%;
    }

        #chartData th, #chartData td {
            padding: 0.5em;
            border: 1px dotted #666;
            text-align: left;
        }

    #chartdiv {
        width: 100%;
        height: 400px;
        font-size: 15px;
    }

    .amcharts-pie-slice {
        transform: scale(1);
        transform-origin: 50% 50%;
        transition-duration: 0.3s;
        transition: all .3s ease-out;
        -webkit-transition: all .3s ease-out;
        -moz-transition: all .3s ease-out;
        -o-transition: all .3s ease-out;
        cursor: pointer;
        box-shadow: 0 0 30px 0 #000;
    }

        .amcharts-pie-slice:hover {
            transform: scale(1.1);
            filter: url(#shadow);
        }
</style>


<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            Estadistica
            <small>Preview sample</small>
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
            <li><a href="#">Estadistica</a></li>
            <li class="active">Estadistica</li>
        </ol>
    </section>
    <!-- Main content -->

    <div class="box-header">
        <div style="float:left; padding:0% 1% 0 1%">
        <a href="~/Master/Index"><center style="margin-left:0px;"><i class="fa fa-home" style="font-size:25px; color:#13D003"></i><br /><strong style="color:black">Home</strong></center></a>
            <br />
        </div>
    </div>

    <section class="content">
        <div class="row">

 
      <div class="col-md-12">
          <div class="col-md-3"></div>

          <div class="col-md-6">
              <form action="" method="post">
                  <div class="col-md-4">
                      <label style="color:white">Mes</label>
                      <select class="form-control select2" name="mes" id="mes">
                          <option value="1">ENERO</option>
                          <option value="2">FEBRERO</option>
                          <option value="3">MARZO</option>
                          <option value="4">ABRIL</option>
                          <option value="5">MAYO</option>
                          <option value="6">JUNIO</option>
                          <option value="7">JULIO</option>
                          <option value="8">AGOSTO</option>
                          <option value="9">SEPTIEMBRE</option>
                          <option value="10">OCTUBRE</option>
                          <option value="11">NOVIEMBRE</option>
                          <option value="12">DICIEMBRE</option>
                      </select>
                  </div>
                  <div class="col-md-4">
                      <label style="color:white">Año</label>
                      <input type="text" name="anio" class="form-control" value="@ViewBag.anio" />
                  </div>
                  <div class="col-md-4">
                      <br />
                      <button type="submit" class="btn btn-danger" style="margin-top: 4px;"><i class="glyphicon glyphicon-search"></i></button>
                  </div>
              </form>
          </div>
          <div class="col-md-3"></div>
          <br />

      </div>

            <br />
            <div class="col-md-12"><br /></div>

            <div class="col-md-6">

                <!-- LINE CHART -->
                <div class="box box-info">
                    <div class="box-header with-border">
                        <h3 class="box-title">Facturacion por dia</h3>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div class="box">
                            <canvas id="lineChart1" height="230" width="850"></canvas>
                        </div>
                        <div class="col-md-12">
                            <div class="col-md-8">
                                <div class="col-md-12">
                                    <div class="col-md-4">
                                        <h3 style="font-size:18px;">Total:</h3>
                                    </div>
                                    <div class="col-md-8">
                                        @{
                                            decimal total = 0;
                                            foreach (var item in totalxmes)
                                            {
                                                total += item.Total;
                                            }
                                        }
                                        <h3 style="font-size:18px;"><b>S/ </b>@total</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4" style="padding-left:40px;padding-right:0px">
                                <h4 style="padding:2%;padding-left:40px;padding-right:0px">
                                    Exportar:
                                    <a title="PDF" href="~/Estadistica/GeneraFacturacionXPorMes/?id=PDF&Mes=@ViewBag.Mes&anio=@ViewBag.anio" target="_blank"><i class="fa fa-file-pdf-o"></i></a> |
                                    <a title="Excel" href="~/Estadistica/GeneraFacturacionXPorMes/?id=Excel&Mes=@ViewBag.Mes&anio=@ViewBag.anio" target="_blank"><i class="fa fa-file-excel-o"></i></a>
                                </h4>
                            </div>
                        </div>
                    </div>
                    <!-- /.box-body -->
                </div>
                <!-- /.box -->
            </div>


            <div class="col-md-6">
                <div class="box box-info">
                    <div class="box-header with-border">
                        <h3 class="box-title">Total de Pacientes Atendido por dia</h3>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">

                        <div>
                            <div class="box">
                                <canvas id="lineChart2" height="230" width="850"></canvas>
                            </div>
                        </div>

                        <div class="col-md-12">

                            <div class="col-md-8">
                                <div class="col-md-12">

                                    <div class="col-md-4">
                                        <h3 style="font-size:18px;">Total:</h3>
                                    </div>
                                    <div class="col-md-8">
                                        @{
                                            decimal totalpac = 0;
                                            foreach (var item in totpacientesxmes)
                                            {
                                                totalpac += item.TotPaciente;
                                            }
                                        }

                                        <h3 style="font-size:18px;"><b> </b>@totalpac</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4" style="padding-left:40px;padding-right:0px">
                                <h4 style="padding:2%;padding-left:40px;padding-right:0px">
                                    Exportar:
                                    <a title="PDF" href="~/Estadistica/GeneraPacienteAtendidoXDia/?id=PDF&Mes=@ViewBag.Mes&anio=@ViewBag.anio" target="_blank"><i class="fa fa-file-pdf-o"></i></a> |
                                    <a title="Excel" href="~/Estadistica/GeneraPacienteAtendidoXDia/?id=Excel&Mes=@ViewBag.Mes&anio=@ViewBag.anio" target="_blank"><i class="fa fa-file-excel-o"></i></a>
                                </h4>
                            </div>
                        </div>
                    </div>
                    <!-- /.box-body -->
                </div>

            </div>

            <div class="col-md-6">
                <div class="box box-info">
                    <div class="box-header with-border">
                        <h3 class="box-title">Total Pacientes por Sexo </h3>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">

                        <div>
                            <div class="box">
                                <canvas id="lineChart4" height="230" width="850"></canvas>
                            </div>
                        </div>
                        <div class="col-md-12">

                            <div class="col-md-8" style="padding-left:0px;padding-right:0px">
                                <div class="col-md-12" style="padding-left:0px;padding-right:0px">

                                    @{
                                        var totalpacSexoM = 0;
                                        var totalpacSexoF = 0;
                                        foreach (var item in FacturacionXPacienteXSexo)
                                        {
                                            if (item.nomSexo == "Femenino")
                                            {
                                                totalpacSexoF += item.TotPaciente;
                                            }
                                            else if (item.nomSexo == "Masculino")
                                            {
                                                totalpacSexoM += item.TotPaciente;
                                            }

                                        }
                                    }
                                    <div class="col-md-6" style="padding-left:0px;padding-right:0px">
                                        <div class="col-md-12">
                                            <h3 style="font-size:18px">Total Masculino:&nbsp @totalpacSexoM</h3>
                                        </div>

                                    </div>
                                    <div class="col-md-6" style="padding-left:0px;padding-right:0px">
                                        <div class="col-md-12">
                                            <h3 style="font-size:18px">Total Femenino:&nbsp @totalpacSexoF</h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4" style="padding-left:40px;padding-right:0px">
                                <h4 style="padding:2%;padding-left:40px;padding-right:0px">
                                    Exportar:
                                    <a title="PDF" href="~/Estadistica/GeneraTotalPacientesXSexo/?id=PDF&Mes=@ViewBag.Mes&anio=@ViewBag.anio" target="_blank"><i class="fa fa-file-pdf-o"></i></a> |
                                    <a title="Excel" href="~/Estadistica/GeneraTotalPacientesXSexo/?id=Excel&Mes=@ViewBag.Mes&anio=@ViewBag.anio" target="_blank"><i class="fa fa-file-excel-o"></i></a>
                                </h4>
                            </div>
                        </div>
                    </div>
                    <!-- /.box-body -->
                </div>

            </div>

            <div class="col-md-6">
                <div class="box box-info">
                    <div class="box-header with-border">
                        <h3 class="box-title">Total de Pacientes por Turno</h3>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">

                        <div>
                            <div class="box">
                                <canvas id="lineChart6" height="230" width="850"></canvas>
                            </div>
                        </div>
                        <div class="col-md-12">

                            <div class="col-md-8" style="padding-left:0px;padding-right:0px">
                                @{
                                    decimal m = 0;
                                    decimal t = 0;
                                    foreach (var item in FacturacionXTotalXturnoPacientes)
                                    {
                                        if (item.Turno == "MAÑANA")
                                        {
                                            m += item.TotPaciente;
                                        }
                                        else if (item.Turno == "TARDE")
                                        {
                                            t += item.TotPaciente;
                                        }

                                    }
                                }
                                <div class="col-md-12">
                                    <div class="col-md-6">
                                        <div class="col-md-12" style="padding-left:0px;padding-right:0px">
                                            <h3 style="font-size:18px">Total&nbsp Mañana:&nbsp &nbsp @m</h3>
                                        </div>

                                    </div>
                                    <div class="col-md-6">
                                        <div class="col-md-12" style="padding-left:0px;padding-right:0px">
                                            <h3 style="font-size:18px;">Total&nbsp&nbspTarde:&nbsp &nbsp @t</h3>
                                        </div>

                                    </div>

                                </div>
                            </div>
                            <div class="col-md-4" style="padding-left:40px;padding-right:0px">
                                <h4 style="padding:2%;padding-left:40px;padding-right:0px">
                                    Exportar:
                                    <a title="PDF" href="~/Estadistica/GeneraPacienteXTurno/?id=PDF&Mes=@ViewBag.Mes&anio=@ViewBag.anio" target="_blank"><i class="fa fa-file-pdf-o"></i></a>
                                    <a title="Excel" href="~/Estadistica/GeneraPacienteXTurno/?id=Excel&Mes=@ViewBag.Mes&anio=@ViewBag.anio" target="_blank"><i class="fa fa-file-excel-o"></i></a>
                                </h4>
                            </div>
                        </div>

                    </div>
                    <!-- /.box-body -->
                </div>

            </div>



            <div class="col-md-6">
                <div class="box box-info">
                    <div class="box-header with-border">
                        <h3 class="box-title">Facturacion por Turno</h3>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">

                        <div>
                            <div class="box">
                                <canvas id="lineChart5" height="230" width="850"></canvas>
                            </div>
                        </div>
                        <div class="col-md-12">

                            <div class="col-md-8" style="padding-left:0px;padding-right:0px">
                                <div class="col-md-12">

                                    @{
                                        decimal mañana = 0;
                                        decimal tarde = 0;
                                        foreach (var item in FacturacionXDiasXturno)
                                        {
                                            if (item.Turno == "MAÑANA")
                                            {
                                                mañana += item.Total;
                                            }
                                            else if (item.Turno == "TARDE")
                                            {
                                                tarde += item.Total;
                                            }

                                        }
                                    }
                                    <div class="col-md-6" style="padding-left:0px;padding-right:0px">
                                        <div class="col-md-12" style="padding-left:0px;padding-right:0px">
                                            <h3 style="font-size:18px">Total M.&nbsp <b>S/&nbsp</b>@mañana</h3>
                                        </div>

                                    </div>
                                    <div class="col-md-6">
                                        <div class="col-md-12" style="padding-left:0px;padding-right:0px">
                                            <h3 style="font-size:18px;">Total T.&nbsp&nbsp <b>S/&nbsp</b>@tarde</h3>
                                        </div>

                                    </div>

                                </div>
                            </div>
                            <div class="col-md-4" style="padding-left:40px;padding-right:0px">
                                <h4 style="padding:2%;padding-left:40px;padding-right:0px">
                                    Exportar:
                                    <a title="PDF" href="~/Estadistica/GeneraFacturacionXTurno/?id=PDF&Mes=@ViewBag.Mes&anio=@ViewBag.anio" target="_blank"><i class="fa fa-file-pdf-o"></i></a> |
                                    <a title="Excel" href="~/Estadistica/GeneraFacturacionXTurno/?id=Excel&Mes=@ViewBag.Mes&anio=@ViewBag.anio" target="_blank"><i class="fa fa-file-excel-o"></i></a>
                                </h4>
                            </div>
                        </div>

                    </div>
                    <!-- /.box-body -->
                </div>
                
            </div>

            <div class="col-md-6">
                <div class="box box-info">
                    <div class="box-header with-border">
                        <h3 class="box-title">Total de Tipo de Tarifa por Dia</h3>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">


                        <div class="box">
                            <canvas id="lineChart3" height="230" width="850"></canvas>
                        </div>
                        <div class="col-md-12">

                            <div class="col-md-8" style="padding-left:0px;padding-right:0px">
                                <div class="col-md-12">

                                    @{
                                        decimal consulta = 0;
                                        decimal procedimiento = 0;
                                        foreach (var item in FacturacionXTipoTarifa)
                                        {
                                            if (item.NomTipTar == "CONSULTA")
                                            {
                                                consulta += item.Total;
                                            }
                                            else if (item.NomTipTar == "PROCEDIMIENTOS")
                                            {
                                                procedimiento += item.Total;
                                            }

                                        }
                                    }
                                    <div class="col-md-6" style="padding-left:0px;padding-right:0px">
                                        <div class="col-md-12" style="padding-left:0px;padding-right:0px">
                                            <h3 style="font-size:18px">Total C.&nbsp<b>&nbspS/</b>@consulta</h3>

                                        </div>

                                    </div>
                                    <div class="col-md-6">
                                        <div class="col-md-12" style="padding-left:0px;padding-right:0px">
                                            <h3 style="font-size:18px;">Total P.&nbsp<b>&nbspS/</b>@procedimiento</h3>
                                        </div>

                                    </div>

                                </div>
                            </div>
                            <div class="col-md-4" style="padding-left:40px;padding-right:0px;">
                                <h4 style="padding:2%;padding-left:40px;padding-right:0px">
                                    Exportar:
                                    <a title="PDF" href="~/Estadistica/GeneraTipoTarifaPorDia/?id=PDF&Mes=@ViewBag.Mes&anio=@ViewBag.anio" target="_blank"><i class="fa fa-file-pdf-o"></i></a> |
                                    <a title="Excel" href="~/Estadistica/GeneraTipoTarifaPorDia/?id=Excel&Mes=@ViewBag.Mes&anio=@ViewBag.anio" target="_blank"><i class="fa fa-file-excel-o"></i></a>
                                </h4>
                            </div>
                        </div>

                    </div>

                </div>

            </div>



            @*<div class="col-md-6">
                    <div class="box box-info">
                        <div class="box-header with-border">
                            <h3 class="box-title">Total de ventas por tipo de producto </h3>
                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                    <i class="fa fa-minus"></i>
                                </button>
                                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <div class="box-body">
                            <div id="chartdiv"></div>

                        </div>

                    </div>

                </div>*@


        </div>


    </section>


</div>

<script>

    $(function () {


        //cambiar color


        //1
        var data = {
            labels: [
                 @foreach (var item in totalxmes) {
                     <text>
                       "@item.dia",
                       </text>
                 }
            ],
            dataUnoA: [
                                 @foreach (var item in totalxmes) {

                                     <text>
                                       ("@item.NameDia").replace("&#233;","e"),
                                     </text>

                                 }

            ],
            datasets: [

                         {
                             label: "Total",
                             fillColor: "rgba(0,0,0,0.3)",
                             strokeColor: "rgba(0,0,0,0,1)",
                             pointColor: "rgba(0,0,0,0,1)",
                             pointStrokeColor: "#fff",
                             pointHighlightFill: "#fff",
                             pointHighlightStroke: "rgba(0,0,0,0,1)",

                             data: [
                                 @foreach (var item in totalxmes) {

                                     <text>
                                       "@item.Total",
                                     </text>

                                 }

                             ]

                         },
                         {
                             label: "Electronics",
                             fillColor: "rgba(0,0,0,0.3)",
                             strokeColor: "rgba(0,0,0,0,1)",
                             pointColor: "rgba(0,0,0,0,1)",
                             pointStrokeColor: "#fff",
                             pointHighlightFill: "#fff",
                             pointHighlightStroke: "rgba(0,0,0,0,1)",
                             data: [
                                 @foreach (var item in totalxmes) {

                                     <text>
                                       null,
                                     </text>

                                 }

                             ]

                         }



            ]
        };
        var ctx = document.getElementById("lineChart1").getContext("2d");
        var options = {
            responsive: true,
            tooltipTemplate: "<%if (label){%><%=label%>: <%}%><%= value %>",
            segmentColorDefault: ["#A6CEE3", "#1F78B4", "#B2DF8A", "#33A02C", "#FB9A99", "#E31A1C", "#FDBF6F", "#FF7F00", "#CAB2D6", "#6A3D9A", "#B4B482", "#B15928" ],
            multiTooltipTemplate: "<%= datasetLabel %>: S/. <%= value %>"
        };
        var lineChart = new Chart(ctx).LineObed(data, options);


        //2
        var data = {
            labels: [
                  @foreach (var item in totpacientesxmes) {
                      <text>
                         "@item.dia.ToString()",
                      </text>
                  }
            ],
            dataUnoA: [
                                 @foreach (var item in totpacientesxmes) {

                                     <text>
                                       ("@item.NameDia").replace("&#233;","e"),
                                     </text>

                                 }

            ],
            datasets: [
                         {
                             label: "Total",
                             fillColor: "rgba(0,0,0,0.3)",
                             strokeColor: "rgba(0,0,0,0,1)",
                             pointColor: "rgba(0,0,0,0,1)",
                             pointStrokeColor: "#fff",
                             pointHighlightFill: "#fff",
                             pointHighlightStroke: "rgba(0,0,0,0,1)",
                             data: [
                                 @foreach (var item in totpacientesxmes) {
                                      <text>
                                       "@item.TotPaciente",
                                     </text>
                                 }
                             ]
                         },
                         {
                             label: "Electronics",
                             fillColor: "rgba(0,0,0,0.3)",
                             strokeColor: "rgba(0,0,0,0,1)",
                             pointColor: "rgba(0,0,0,0,1)",
                             pointStrokeColor: "#fff",
                             pointHighlightFill: "#fff",
                             pointHighlightStroke: "rgba(0,0,0,0,1)",
                             data: [
                                 @foreach (var item in totpacientesxmes) {

                                     <text>
                                       null,
                                     </text>

                                 }

                             ]

                         }


            ]
        };

        var ctx = document.getElementById("lineChart2").getContext("2d");
        var options = {
            responsive: true,
            tooltipTemplate: "<%if (label){%><%=label%>: <%}%><%= value %>",
            segmentColorDefault: ["#A6CEE3", "#1F78B4", "#B2DF8A", "#33A02C", "#FB9A99", "#E31A1C", "#FDBF6F", "#FF7F00", "#CAB2D6", "#6A3D9A", "#B4B482", "#B15928" ],
            multiTooltipTemplate: "<%= datasetLabel %>:  <%= value %>"
        };
        var lineChart = new Chart(ctx).LineObed(data, options);


        //3
        var data = {
            labels: [
                  @foreach (var item in ListaDiasTar) {
            <text>
               "@item.dia",
            </text>
        }
            ],
            datasets: [
                          @foreach(var demo in ListatipTar)
                          {

               <text>


        {

            label: "@demo.NomTipTar",
            fillColor: "rgba(@demo.color1,0.3)",
            strokeColor: "rgba(@demo.color1,1)",
            pointColor: "rgba(@demo.color1,1)",
            pointStrokeColor: "#fff",
            pointHighlightFill: "#fff",
            pointHighlightStroke: "rgba(@demo.color1,1)",
            data: [

            @foreach (var item1 in FacturacionXTipoTarifa)
        {
                                      var evaluaDemo = FacturacionXTipoTarifa.Where(x => x.CodTipTar== demo.CodTipTar);
                                      if (item1.CodTipTar == demo.CodTipTar)
                                      {
                                          foreach (var demin in ListaDiasTar)
                                          {
                                              var estado = FacturacionXTipoTarifa.Find(x => x.dia == demin.dia && x.CodTipTar == item1.CodTipTar);
                                              if (estado != null)
                                              {
                    <text>
                            "@estado.Total",
                            </text>
                                              }
                                              else
                                              {
                    <text>
                            null,
                            </text>
                                              }
                                          }
                                          break;
                                      }
                                  }
            ]
        },

        </text>
    }

            ]
        };

        var ctx = document.getElementById("lineChart3").getContext("2d");
        var options = {
            responsive: true
        };
        var lineChart = new Chart(ctx).Line(data, options);

        //4
        var data = {
            labels: [
                @foreach (var item in ListaDiasSexo) {
                    <text>
                       "@item.dia",
                    </text>
                }
            ],
            datasets: [
                 @foreach(var demo in ListaSexo)
        {

            <text>
     {

         label: "@demo.nomSexo",
         fillColor: "rgba(@demo.color1,0.3)",
         strokeColor: "rgba(@demo.color1,1)",
         pointColor: "rgba(@demo.color1,1)",
         pointStrokeColor: "#fff",
         pointHighlightFill: "#fff",
         pointHighlightStroke: "rgba(@demo.color1,1)",
         data: [

         @foreach (var item1 in FacturacionXPacienteXSexo)
         {
             //var evaluaDemo = FacturacionXPacienteXSexo.Where(x => x.nomSexo== demo.nomSexo);
             if (item1.nomSexo == demo.nomSexo)
             {
                 foreach (var demin in ListaDiasSexo)
                 {
                     var estado = FacturacionXPacienteXSexo.Find(x => x.dia == demin.dia && x.nomSexo == item1.nomSexo);
                     if (estado != null)
                     {
                        <text>
                        "@estado.TotPaciente",
                        </text>
                    }
                    else
                    {
                        <text>
                        null,
                        </text>
                    }
                }
                break;
            }
        }
         ]
     },

        </text>
    }
            ]
        };
        var ctx = document.getElementById("lineChart4").getContext("2d");
        var options = {
            responsive: true
        };
        var lineChart = new Chart(ctx).Line(data, options);
        //5
        var data = {
            labels: [
       @foreach (var item in ListaDiasSexo) {
           <text>
              "@item.dia",
           </text>
       }
            ],
            datasets: [
                 @foreach(var demo in turno)
        {

            <text>
     {

         label: ("@demo.Turno").replace("&#209;", "Ñ"),
         fillColor: "rgba(@demo.color1,0.3)",
         strokeColor: "rgba(@demo.color1,1)",
         pointColor: "rgba(@demo.color1,1)",
         pointStrokeColor: "#fff",
         pointHighlightFill: "#fff",
         pointHighlightStroke: "rgba(@demo.color1,1)",
         data: [

         @foreach (var item1 in FacturacionXDiasXturno)
         {
             //var evaluaDemo = FacturacionXPacienteXSexo.Where(x => x.nomSexo== demo.nomSexo);
             if (item1.Turno == demo.Turno)
            {
                 foreach (var demin in ListaDiasSexo)
            {
            var estado = FacturacionXDiasXturno.Find(x => x.dia == demin.dia && x.Turno == item1.Turno);
            if (estado != null)
            {
                <text>
                "@estado.Total",
                </text>
            }
            else
            {
                <text>
                null,
                </text>
            }
        }
        break;
    }
    }
         ]
     },

        </text>
    }
            ]
        };
        var ctx = document.getElementById("lineChart5").getContext("2d");
        var options = {
            responsive: true
        };
        var lineChart = new Chart(ctx).Line(data, options);

        //6
        var data = {
            labels: [
       @foreach (var item in ListaDiasSexo) {
        <text>
               "@item.dia",
            </text>
    }
            ],
            datasets: [
                 @foreach(var demo in turno)
        {

        <text>
     {

         label: ("@demo.Turno").replace("&#209;", "Ñ"),
         fillColor: "rgba(@demo.color1,0.3)",
         strokeColor: "rgba(@demo.color1,1)",
         pointColor: "rgba(@demo.color1,1)",
         pointStrokeColor: "#fff",
         pointHighlightFill: "#fff",
         pointHighlightStroke: "rgba(@demo.color1,1)",
         data: [

         @foreach (var item1 in FacturacionXTotalXturnoPacientes)
     {
         //var evaluaDemo = FacturacionXPacienteXSexo.Where(x => x.nomSexo== demo.nomSexo);
         if (item1.Turno == demo.Turno)
    {
             foreach (var demin in ListaDiasSexo)
    {
        var estado = FacturacionXTotalXturnoPacientes.Find(x => x.dia == demin.dia && x.Turno == item1.Turno);
    if (estado != null)
    {
        <text>
            "@estado.TotPaciente",
            </text>
    }
    else
    {
        <text>
            null,
            </text>
    }
    }
        break;
}
}
         ]
     },

            </text>
}
            ]
        };
        var ctx = document.getElementById("lineChart6").getContext("2d");
        var options = {
            responsive: true
        };
        var lineChart = new Chart(ctx).Line(data, options);




    });

    $('#mes option[value="@ViewBag.Mes"]').prop("selected", "selected").change();



    var chart = AmCharts.makeChart("chartdiv", {
        "type": "pie",
        "startDuration": 0,
        "theme": "light",
        "addClassNames": true,
        "legend": {
            "position": "right",
            "marginRight": 100,
            "autoMargins": true
        },
        "innerRadius": "30%",
        "defs": {
            "filter": [{
                "id": "shadow",
                "width": "200%",
                "height": "200%",
                "feOffset": {
                    "result": "offOut",
                    "in": "SourceAlpha",
                    "dx": 0,
                    "dy": 0
                },
                "feGaussianBlur": {
                    "result": "blurOut",
                    "in": "offOut",
                    "stdDeviation": 5
                },
                "feBlend": {
                    "in": "SourceGraphic",
                    "in2": "blurOut",
                    "mode": "normal"
                }
            }]
        },
        "dataProvider": [

            @foreach (var a in ListaVentasTipoTarifa)
    {
        <text>
   {
       "country": "@a.NomTipTar",
       "litres": @a.Total,
   },
       </text>
    }

        ],
        "valueField": "litres",
        "titleField": "country",
        "export": {
            "enabled": true
        }
    });

    chart.addListener("init", handleInit);

    chart.addListener("rollOverSlice", function (e) {
        handleRollOver(e);
    });

    function handleInit() {
        chart.legend.addListener("rollOverItem", handleRollOver);
    }

    function handleRollOver(e) {
        var wedge = e.dataItem.wedge.node;
        wedge.parentNode.appendChild(wedge);
    }



</script>

<script>
    var ALT = 18; var N = 78; var presiono2 = false;
    $(document).keydown(function (e) {
        if (e.keyCode == ALT) {
            presiono2 = true;
        }
        else if (presiono2 && (e.keyCode == 112)) {
            $(location).attr("href", "../Master/Index");
        }

    });
    $(document).keyup(function (e) {

        if (e.keyCode == ALT) {
            presiono2 = false;
        }
    });
</script>