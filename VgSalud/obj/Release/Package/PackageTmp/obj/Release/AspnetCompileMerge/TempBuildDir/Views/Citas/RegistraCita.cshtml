@model VgSalud.Models.E_Citas

@{
    ViewBag.Title = "RegistraCita";

    var listaMedicos = (List<VgSalud.Models.E_Medico>)ViewBag.listaMedicos;

}

<div class="content-wrapper">
    <section class="content-header">
        <h1>Registrar Cita</h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-users"></i>Cita</a></li>
            <li class="active">Registrar Cita</li>
        </ol>
    </section>
    <section class="content">
        <div class="box box-default">
            <div class="box-header with-border">
                <h3 class="box-title">Registro de cita</h3>
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                    <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
                </div>
            </div>

            <form method="post" id="formulario" action="~/Citas/RegistraCitaCuenta">

                <div class="box-body">
                    <div class="col-md-6">

                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })


                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Paciente</label>
                            </div>
                            <div class="col-md-9">
                                <input type="hidden" name="Historia" value="@ViewBag.Historia" />
                                <input type="text" class="form-control" name="nombrePaciente" value="@ViewBag.nombre" readonly />
                                @Html.ValidationMessageFor(model => model.Historia, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Especialidad</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" value="@ViewBag.nombreEspecialidad" readonly />
                                <input type="hidden" name="CodEspec" value="@ViewBag.CodEspec" />
                                @Html.ValidationMessageFor(model => model.CodEspec, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Servicio</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" value="@ViewBag.nombreServicio" readonly />
                                <input type="hidden" name="CodServ" value="@ViewBag.CodServ" />
                                @Html.ValidationMessageFor(model => model.CodServ, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Tipo de paciente</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" name="TipoPac" class="form-control" value="@ViewBag.TipoPaciente" readonly />
                                @Html.ValidationMessageFor(model => model.TipoPac, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Obeservacion</label>
                            </div>
                            <div class="col-md-9">
                                <textarea name="Obser" class="form-control"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Categoria de paciente</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" value="@ViewBag.nombreCategoria" readonly />
                                <input type="hidden" name="CodCatPac" value="@ViewBag.CodCatPac" />
                                @Html.ValidationMessageFor(model => model.CodCatPac, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Tarifa</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" value="@ViewBag.nombreTarifario" readonly />
                                <input type="hidden" name="CodTar" value="@ViewBag.CodTar" />
                                @Html.ValidationMessageFor(model => model.CodTar, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Tipo de tarifa</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" name="NomTar" value="@ViewBag.nombreTipoTarifa" readonly />
                                <input type="hidden" name="CodTipTar" value="@ViewBag.CodTipTar" />
                                @Html.ValidationMessageFor(model => model.CodTipTar, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-3">
                                <label>N° de cuenta</label>
                            </div>
                            <div class="col-md-9">
                                @Html.EditorFor(model => model.CodCue, new { htmlAttributes = new { @class = "form-control", @readonly = true } })
                            </div>
                        </div>

                    </div>
                    <div class="col-md-6">


                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Medico</label>
                            </div>
                            <div class="col-md-9">
                                @Html.EditorFor(model => model.NomMed, new { htmlAttributes = new { @class = "form-control", @readonly = true } })
                                <input type="hidden" name="CodMed" value="@ViewBag.CodMed" />
                                @Html.ValidationMessageFor(model => model.NomMed, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Hora de inicio</label>
                            </div>
                            <div class="col-md-9">
                                @Html.EditorFor(model => model.HoraInicio, new { htmlAttributes = new { @class = "form-control", @readonly = true } })
                                @* <input type="text" name="HoraInicio" id="HoraInicio" value="@Model.HoraInicio" class="form-control" />*@
                                @Html.ValidationMessageFor(model => model.HoraInicio, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Hora Final</label>
                            </div>
                            <div class="col-md-9">
                                @Html.EditorFor(model => model.HoraFin, new { htmlAttributes = new { @class = "form-control", @readonly = true } })
                                @Html.ValidationMessageFor(model => model.HoraFin, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Fecha de cita</label>
                            </div>
                            <div class="col-md-9">
                                @Html.EditorFor(model => model.fechaCita, new { htmlAttributes = new { @class = "form-control", @readonly = true } })
                                @Html.ValidationMessageFor(model => model.fechaCita, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Turno</label>
                            </div>
                            <div class="col-md-9">
                                @Html.EditorFor(model => model.Turno, new { htmlAttributes = new { @class = "form-control", @readonly = true } })
                                @Html.ValidationMessageFor(model => model.Turno, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Consultorio</label>
                            </div>
                            <div class="col-md-9">
                                @Html.EditorFor(model => model.Consultorio, new { htmlAttributes = new { @class = "form-control", @readonly = true } })
                                @Html.ValidationMessageFor(model => model.Consultorio, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Sub Total</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" name="precio" class="form-control" value="@ViewBag.Precio" readonly />
                                @Html.ValidationMessageFor(model => model.precio, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3">
                                <label>IGV</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" name="igv" class="form-control" value="@ViewBag.igv" readonly />
                                @Html.ValidationMessageFor(model => model.igv, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Total</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" name="total" class="form-control" value="@ViewBag.Total" readonly />
                                @Html.ValidationMessageFor(model => model.total, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Tipo de consulta</label>
                            </div>
                            <div class="col-md-9">
                                <table>
                                    <tr>
                                        <td><input type="radio" name="TipoConsu" value="Interconsulta" id="inter" /> &nbsp</td>
                                        <td>Interconsulta</td>
                                    </tr>
                                    <tr>
                                        <td><input type="radio" name="TipoConsu" value="Normal" id="normal" /> &nbsp</td>
                                        <td>Normal</td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="form-group" id="medInter">
                            <div class="col-md-3">
                                <label>Medico que envia interconsulta</label>
                            </div>
                            <div class="col-md-9">
                                <select name="MedInter" class="form-control select2">
                                    <option value=" " selected>[NO SELECCIONADO]</option>
                                    @foreach (var i in listaMedicos)
                                    {
                                        <option value="@i.CodMed">@i.NomMed - @i.Especialidad</option>
                                    }
                                </select>
                            </div>
                        </div>

                    </div>


                    <label></label>
                    <div class="col-md-12" style="margin-top:5%">
                        <div class="form-group">
                            <center>
                                <input type="button" class="btn btn-danger" id="boton" value="Registrar"> 
                                <a href="#" onclick="history.back();return false" class="btn btn-info">Cancelar</a>
                            </center>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </section>
</div>


<script>

    $(document).ready(function () {

        $("#medInter").fadeOut();

        $('#inter').click(function (event) {
            $("#medInter").fadeIn();
        });

        $('#normal').click(function (event) {
            $("#medInter").fadeOut();
        });

        
        $("#boton").click(function () {
            if ($("#formulario input[name='TipoConsu']:radio").is(':checked')) {
				$("#formulario").submit();
			}
			else {
				alert("Selecciona el tipo de consulta");
			}
		 });
	    
    });

</script>