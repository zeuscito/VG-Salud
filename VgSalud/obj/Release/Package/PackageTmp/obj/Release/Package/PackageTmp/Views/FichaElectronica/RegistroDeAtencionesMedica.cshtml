@model VgSalud.Models.E_Ficha_Electronica

@{
    ViewBag.Title = "RegistroDeAtencionesMedica";
    var listaDiagnostico = "";
    var activaTab = "class=active";
    var activaVista = "in active";
    var listaCie10 = (SelectList)ViewBag.listaCie10;
    var listaEspecialidad = (SelectList)ViewBag.listaEspecialidad;
    var Listadiagnostico = (List<VgSalud.Models.E_Ficha_Electronica>)ViewBag.Listadiagnostico;
    var listaEspe = (List<VgSalud.Models.E_Especialidades>)ViewBag.listaEspe;
    var ListaExamenAuxiliar = (List<VgSalud.Models.E_Ficha_Electronica>)ViewBag.ListaExamenAuxiliar;
    var ListaRecetas = (List<VgSalud.Models.E_Ficha_Electronica>)ViewBag.ListaRecetas;
    var antecedentes = (List<VgSalud.Models.E_Ficha_Electronica>)ViewBag.antecedentes;
    var listaFormaFarm = (SelectList)ViewBag.listaFormaFarm;
    var listaFrecuencia = (SelectList)ViewBag.listaFrecuencia;
    var ListaUltimaConsulta = (List<VgSalud.Models.E_Ficha_Electronica>)ViewBag.ListaUltimaConsulta;

    int cuentaExamen = 0;

    List<SelectListItem> items = new List<SelectListItem>();
    items.Add(new SelectListItem { Text = "VÍA ORAL", Value = "VÍA ORAL", Selected = true });
    items.Add(new SelectListItem { Text = "VÍA SUBLINGUAL", Value = "VÍA SUBLINGUAL" });
    items.Add(new SelectListItem { Text = "VÍA RECTAL", Value = "VÍA RECTAL" });
    items.Add(new SelectListItem { Text = "VÍA PARENTERAL", Value = "VÍA PARENTERAL" });
    items.Add(new SelectListItem { Text = "VÍA RESPIRATORIA", Value = "VÍA RESPIRATORIA" });
    items.Add(new SelectListItem { Text = "VÍA TÓPICA", Value = "VÍA TÓPICA" });
    items.Add(new SelectListItem { Text = "VÍA OFTÁLMICA", Value = "VÍA OFTÁLMICA" });
    items.Add(new SelectListItem { Text = "VÍA ÓTICA", Value = "VÍA ÓTICA" });
    items.Add(new SelectListItem { Text = "VÍA TRANSDÉRMICA", Value = "VÍA TRANSDÉRMICA" });

    List<SelectListItem> itemsDiag = new List<SelectListItem>();
    itemsDiag.Add(new SelectListItem { Text = "DIAGNÓSTICO DE CERTEZA", Value = "DIAGNÓSTICO DE CERTEZA" });
    itemsDiag.Add(new SelectListItem { Text = "DIAGNÓSTICO PRESUNTIVO", Value = "DIAGNÓSTICO PRESUNTIVO" });
    itemsDiag.Add(new SelectListItem { Text = "DIAGNÓSTICO CONTINUADOR", Value = "DIAGNÓSTICO CONTINUADOR" });
}

<script>

    var originalLeave = $.fn.popover.Constructor.prototype.leave;
    $.fn.popover.Constructor.prototype.leave = function (obj) {
        var self = obj instanceof this.constructor ?
            obj : $(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type)
        var container, timeout;

        originalLeave.call(this, obj);

        if (obj.currentTarget) {
            container = $(obj.currentTarget).siblings('.popover')
            timeout = self.timeout;
            container.one('mouseenter', function () {
                //We entered the actual popover – call off the dogs
                clearTimeout(timeout);
                //Let's monitor popover content instead
                container.one('mouseleave', function () {
                    $.fn.popover.Constructor.prototype.leave.call(self, self);
                });
            })
        }
    };


    $('body').popover({ selector: '[data-popover]', trigger: 'click hover', placement: 'auto', delay: { show: 50, hide: 400 } });

</script>


<div class="content-wrapper">
    <section class="content-header">
        <h1>
            Ficha Electronica
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Inicio</a></li>
            <li class="active">Ficha Electronica</li>
        </ol>
    </section>
    <section class="content">
        <div class="row">

            <div class="col-md-12">

                <h3 style="color:#fff">
                    @ViewBag.historia - @ViewBag.nombrePac -  @ViewBag.edad AÑOS<br />
                    @ViewBag.servicio - @ViewBag.tarifa
                </h3>

                <ul class="nav nav-tabs">
                    <li @if (ViewBag.tab == "1") { @activaTab      }><a data-toggle="tab" href="#anamnesis">Anamnesis</a></li>

                    <li @if (ViewBag.tab == "2") { @activaTab      }><a data-toggle="tab" href="#antecedentes">Antecedentes</a></li>

                    <li @if (ViewBag.tab == "3") { @activaTab      }><a data-toggle="tab" href="#examenFisico">Examen Fisico </a></li>

                    <li @if (ViewBag.tab == "4") { @activaTab      }><a data-toggle="tab" href="#diagnostico">Diagnostico</a></li>

                    <li @if (ViewBag.tab == "5") { @activaTab      }><a data-toggle="tab" href="#examenAuxiliar">Examen Auxiliares</a></li>

                    <li @if (ViewBag.tab == "6") { @activaTab      }><a data-toggle="tab" href="#recetas">Recetas / Interconsulta</a></li>

                    <!--<li><button class="btn btn-info" id="TraerDatos">Cargar ultimo registro del paciente</button></li>-->

                </ul>




                <form action="" method="post" id="formulario">

                    <input type="hidden" name="evento" id="evento" />
                    <input type="hidden" name="CodCue" value="@ViewBag.cuenta" />
                    <input type="hidden" name="Item" value="@ViewBag.item" />
                    <input type="hidden" name="FE" value="@ViewBag.FE" />

                    <div class="tab-content">


                        <div id="anamnesis" class="tab-pane fade @if (ViewBag.tab == "1") { @activaVista; }">

                            <div class="box box-default">
                                <div class="box-header with-border">
                                    <h3 class="box-title">Anamnesis</h3>
                                    <div class="box-tools pull-right">
                                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
                                    </div>
                                </div>


                                <div class="box-body">


                                    <fieldset>

                                        <div class="col-md-6">


                                            <div class="form-group">
                                                <div class="col-md-12">
                                                    <label>Motivo</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("MotivoConsulta", new { @id = "motivo", rows = 6, @style = "width:100%", @value = "" })
                                                </div>
                                            </div>

                                        </div>
                                        <div class="col-md-6">

                                            <div class="form-group">
                                                <div class="col-md-12">
                                                    <label>Relato</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("Relato", new { @id = "relato", rows = 6, @style = "width:100%", @value = "" })
                                                </div>
                                            </div>

                                        </div>

                                        <div class="col-md-12" style="padding:0;margin:0">

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="col-md-3">
                                                        <label>Tiempo Enf.</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        @Html.EditorFor(model => model.TiempoEnfermedad, new { htmlAttributes = new { @id = "tiempoEnf", @class = "form-control", @value = "" } })
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="col-md-3">
                                                        <label>Incio</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        @Html.EditorFor(model => model.Inicio, new { htmlAttributes = new { @id = "inicio", @class = "form-control", @value = "" } })
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="col-md-3">
                                                        <label>Curso</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        @Html.EditorFor(model => model.Curso, new { htmlAttributes = new { @id = "curso", @class = "form-control", value = "" } })
                                                    </div>
                                                </div>
                                            </div>

                                        </div>


                                    </fieldset>


                                    <fieldset style="margin-top:3%">
                                        <legend>Funciones Biologicas</legend>

                                        <div class="col-md-12" style="padding:0;margin:0">

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <div class="col-md-12">
                                                        <label>Sed</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.sed, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <div class="col-md-12">
                                                        <label>Sueño</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.sueño, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <div class="col-md-12">
                                                        <label>Orina</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.Orina, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <div class="col-md-12">
                                                        <label>Apetito</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.apetito, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                                    </div>
                                                </div>
                                            </div>


                                        </div>


                                    </fieldset>

                                </div>
                            </div>

                        </div>

                        <div id="antecedentes" class="tab-pane fade  @if (ViewBag.tab == "2") { @activaVista; }">

                            <div class="box box-default">
                                <div class="box-header with-border">
                                    <h3 class="box-title">Antecedentes</h3>
                                    <div class="box-tools pull-right">
                                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
                                    </div>
                                </div>


                                <div class="box-body">

                                        <div class="col-md-6">

                                            <input type="hidden" name="CodAnt" value="@ViewBag.CodAnt" />

                                            <fieldset>
                                                <legend>Personales</legend>

                                                <div class="form-group col-md-4">
                                                    <div class="col-md-12">
                                                        <label>
                                                            @if (ViewBag.CancerP == true)
                                                            {
                                                                @Html.CheckBoxFor(model => model.CancerP, new { Name = "CancerP", onclick = "return false", @checked = "true" })
                                                            }
                                                            else
                                                            {
                                                                @Html.CheckBoxFor(model => model.CancerP, new { Name = "CancerP" })
                                                            }
                                                            Cancer
                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-4">
                                                    <div class="col-md-12">
                                                        <label>
                                                            @if (ViewBag.DiabetesP == true)
                                                            {
                                                                @Html.CheckBoxFor(model => model.DiabetesP, new { Name = "DiabetesP", onclick = "return false", @checked = "true" })
                                                            }
                                                            else
                                                            {
                                                                @Html.CheckBoxFor(model => model.DiabetesP, new { Name = "DiabetesP" })
                                                            }
                                                            Diabetes
                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-4">
                                                    <div class="col-md-12">
                                                        <label>
                                                            @if (ViewBag.ACVP == true)
                                                            {
                                                                @Html.CheckBoxFor(model => model.ACVP, new { Name = "ACVP", onclick = "return false", @checked = "true" })
                                                            }
                                                            else
                                                            {
                                                                @Html.CheckBoxFor(model => model.ACVP, new { Name = "ACVP" })
                                                            }
                                                            ACV
                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-4">
                                                    <div class="col-md-12">
                                                        <label>
                                                            @if (ViewBag.AlergiaP == true)
                                                            {
                                                                @Html.CheckBoxFor(model => model.AlergiaP, new { Name = "AlergiaP", @checked = "true", onclick="return false" })
                                                            }
                                                            else
                                                            {
                                                                @Html.CheckBoxFor(model => model.AlergiaP, new { Name = "AlergiaP" })
                                                            }
                                                            Alergia
                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-4">
                                                    <div class="col-md-12">
                                                        <label>
                                                            @if (ViewBag.HipertArtP == true)
                                                            {
                                                                @Html.CheckBoxFor(model => model.HipertArtP, new { Name = "HipertArtP", onclick = "return false", @checked = "true" })
                                                            }
                                                            else
                                                            {
                                                                @Html.CheckBoxFor(model => model.HipertArtP, new { Name = "HipertArtP" })
                                                            }
                                                            Hipert. Arterial
                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-4">
                                                    <div class="col-md-12">
                                                        <label>
                                                            @if (ViewBag.OtrosP == true)
                                                            {
                                                                @Html.CheckBoxFor(model => model.OtrosP, new { Name = "OtrosP", onclick = "return false", @checked = "true" })
                                                            }
                                                            else
                                                            {
                                                                @Html.CheckBoxFor(model => model.OtrosP, new { Name = "OtrosP" })
                                                            }
                                                            Otros
                                                        </label>
                                                    </div>
                                                </div>


                                                <div class="form-group col-md-12">
                                                    <div class="col-md-3">
                                                        <label>Observaciones</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        @Html.EditorFor(model => model.ObservacionP, new { htmlAttributes = new { @class = "form-control", @id = "ObservacionP", @Name = "ObservacionP" } })
                                                    </div>
                                                </div>


                                            </fieldset>

                                        </div>


                                        <div class="col-md-6">

                                            <fieldset>
                                                <legend>Familiares</legend>

                                                <div class="form-group col-md-4">
                                                    <div class="col-md-12">
                                                        <label>
                                                            @if (ViewBag.CancerF == true)
                                                            {
                                                                @Html.CheckBoxFor(model => model.CancerF, new { Name = "CancerF", onclick = "return false", @checked = "true" })
                                                            }
                                                            else
                                                            {
                                                                @Html.CheckBoxFor(model => model.CancerF, new { Name = "CancerF" })
                                                            }
                                                            Cancer
                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-4">
                                                    <div class="col-md-12">
                                                        <label>
                                                            @if (ViewBag.DiabetesF == true)
                                                            {
                                                                @Html.CheckBoxFor(model => model.DiabetesF, new { Name = "DiabetesF", onclick = "return false", @checked = "true" })
                                                            }
                                                            else
                                                            {
                                                                @Html.CheckBoxFor(model => model.DiabetesF, new { Name = "DiabetesF" })
                                                            }
                                                            Diabetes
                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-4">
                                                    <div class="col-md-12">
                                                        <label>
                                                            @if (ViewBag.ACVF == true)
                                                            {
                                                                @Html.CheckBoxFor(model => model.ACVF, new { Name = "ACVF", onclick = "return false", @checked = "true" })
                                                            }
                                                            else
                                                            {
                                                                @Html.CheckBoxFor(model => model.ACVF, new { Name = "ACVF" })
                                                            }
                                                            ACV
                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-4">
                                                    <div class="col-md-12">
                                                        <label>
                                                            @if (ViewBag.AlergiaF == true)
                                                            {
                                                                @Html.CheckBoxFor(model => model.AlergiaF, new { Name = "AlergiaF", onclick = "return false", @checked = "true" })
                                                            }
                                                            else
                                                            {
                                                                @Html.CheckBoxFor(model => model.AlergiaF, new { Name = "AlergiaF" })
                                                            }
                                                            Alergia
                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-4">
                                                    <div class="col-md-12">
                                                        <label>
                                                            @if (ViewBag.HipertArtF == true)
                                                            {
                                                                @Html.CheckBoxFor(model => model.HipertArtF, new { Name = "HipertArtF", onclick = "return false", @checked = "true" })
                                                            }
                                                            else
                                                            {
                                                                @Html.CheckBoxFor(model => model.HipertArtF, new { Name = "HipertArtF" })
                                                            }
                                                            Hipert. Arterial
                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-4">
                                                    <div class="col-md-12">
                                                        <label>
                                                            @if (ViewBag.OtrosF == true)
                                                            {
                                                                @Html.CheckBoxFor(model => model.OtrosF, new { Name = "OtrosF", onclick = "return false", @checked = "true" })
                                                            }
                                                            else
                                                            {
                                                                @Html.CheckBoxFor(model => model.OtrosF, new { Name = "OtrosF" })
                                                            }
                                                            Otros
                                                        </label>
                                                    </div>
                                                </div>


                                                <div class="form-group col-md-12">
                                                    <div class="col-md-3">
                                                        <label>Observaciones</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        @Html.EditorFor(model => model.ObservacionF, new { htmlAttributes = new { @class = "form-control", @id = "ObservacionF", @Name = "ObservacionF" } })
                                                    </div>
                                                </div>


                                            </fieldset>
                                        </div>

                                    <div class="col-md-12" id="datosGineco">
                                        <div class="row">
                                            <fieldset>
                                                <legend>Antecedentes Gineco Obstetricos</legend>

                                                <div class="form-group col-md-2">
                                                    <div class="col-md-12">
                                                        <label>Paridad</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.paridad, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-2">
                                                    <div class="col-md-12">
                                                        <label>PIG</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.PIG, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-2">
                                                    <div class="col-md-12">
                                                        <label>FUR</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.FUR, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-2">
                                                    <div class="col-md-12">
                                                        <label>FPP</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.FPP, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-2">
                                                    <div class="col-md-12">
                                                        <label>Edad Gestacional</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.EdadGestacional, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-2">
                                                    <div class="col-md-12">
                                                        <label>Ultimo pap.</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.UltimoPap, new { htmlAttributes = new { @class = "form-control datepicker", @value = "" } })
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-2">
                                                    <div class="col-md-12">
                                                        <label>Resultado Pap.</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.ResultPap, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-2">
                                                    <div class="col-md-12">
                                                        <label>MACtipTime</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.MACtipTime, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-8">
                                                    <div class="col-md-12">
                                                        <label>Observaciones</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.Otrosginec, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                                    </div>
                                                </div>


                                            </fieldset>
                                        </div>

                                    </div>


                                </div>
                            </div>

                        </div>

                        <div id="examenFisico" class="tab-pane fade  @if (ViewBag.tab == "3") { @activaVista; }">

                            <div class="box box-default">
                                <div class="box-header with-border">
                                    <h3 class="box-title">Examen Fisico</h3>
                                    <div class="box-tools pull-right">
                                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
                                    </div>
                                </div>


                                <div class="box-body">


                                    <div class="col-md-12">

                                        <div class="form-group col-md-2">
                                            <div class="col-md-12">
                                                <label>FC</label>
                                            </div>
                                            <div class="col-md-12">
                                                @Html.EditorFor(model => model.FC, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                            </div>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <div class="col-md-12">
                                                <label>PA</label>
                                            </div>
                                            <div class="col-md-12">
                                                @Html.EditorFor(model => model.PA, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                            </div>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <div class="col-md-12">
                                                <label>FR</label>
                                            </div>
                                            <div class="col-md-12">
                                                @Html.EditorFor(model => model.FR, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                            </div>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <div class="col-md-12">
                                                <label>T° Ax.</label>
                                            </div>
                                            <div class="col-md-12">
                                                @Html.EditorFor(model => model.Tax, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                            </div>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <div class="col-md-12">
                                                <label>T° Rectal.</label>
                                            </div>
                                            <div class="col-md-12">
                                                @Html.EditorFor(model => model.Tanal, new { htmlAttributes = new { @class = "form-control", @value = "" } })
                                            </div>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <div class="col-md-12">
                                                <label>Peso</label>
                                            </div>
                                            <div class="col-md-12">
                                                @Html.EditorFor(model => model.Peso, new { htmlAttributes = new { @class = "form-control",  @id="peso", @value = "" } })
                                            </div>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <div class="col-md-12">
                                                <label>Talla</label>
                                            </div>
                                            <div class="col-md-12">
                                                @Html.EditorFor(model => model.talla, new { htmlAttributes = new { @class = "form-control", @id = "talla", @value = "" } })
                                            </div>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <div class="col-md-12">
                                                <label>IMC</label>
                                            </div>
                                            <div class="col-md-12">
                                                @Html.EditorFor(model => model.IMC, new { htmlAttributes = new { @class = "form-control", @id = "imc", @value = "" } })
                                                <small id="alertaImc"></small>
                                            </div>
                                        </div>


                                    </div>


                                    <div class="col-md-12">
                                        <fieldset>

                                            <div class="form-group col-md-4">
                                                <div class="col-md-12">
                                                    <label>Examen General</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("ExaGeneral", new { rows = 10, @style = "width:100%" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-4">
                                                <div class="col-md-12">
                                                    <label>Ubicacion Espacio Temporal</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("UbicEspTampa", new { rows = 10, @style = "width:100%" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-4">
                                                <div class="col-md-12">
                                                    <label>Estado Nutricional</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("EstNutricion", new { rows = 10, @style = "width:100%" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-4">
                                                <div class="col-md-12">
                                                    <label>Examen de hidratacion</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("EstHidratacion", new { rows = 10, @style = "width:100%" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-4">
                                                <div class="col-md-12">
                                                    <label>Piel, Fanera y Tejido Muscular Sub Cutanea</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("PielFanerasTejido", new { rows = 10, @style = "width:100%" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-4">
                                                <div class="col-md-12">
                                                    <label>Cabeza y cuello</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("CabezaCuello", new { rows = 10, @style = "width:100%" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-4">
                                                <div class="col-md-12">
                                                    <label>Sistema Osteo Muscular</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("SisOsteoMuscular", new { rows = 10, @style = "width:100%" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-4">
                                                <div class="col-md-12">
                                                    <label>Mamas</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("Mamas", new { rows = 10, @style = "width:100%" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-4">
                                                <div class="col-md-12">
                                                    <label>Sistema Respiratorio</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("SisRespiratorio", new { rows = 10, @style = "width:100%" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-4">
                                                <div class="col-md-12">
                                                    <label>Sistema Cardiovascular</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("SisCardiovascular", new { rows = 10, @style = "width:100%" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-4">
                                                <div class="col-md-12">
                                                    <label>Abdomen y pelvis</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("AbdomenPelvis", new { rows = 10, @style = "width:100%" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-4">
                                                <div class="col-md-12">
                                                    <label>Examen Obstetrico</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("ExaObstetrico", new { rows = 10, @style = "width:100%" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-4">
                                                <div class="col-md-12">
                                                    <label>Sistema Genito Urinario</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("SisGenitourinario", new { rows = 10, @style = "width:100%" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-4">
                                                <div class="col-md-12">
                                                    <label>Sistema Nervioso</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.TextArea("SisNervioso", new { rows = 10, @style = "width:100%" })
                                                </div>
                                            </div>



                                        </fieldset>
                                    </div>



                                </div>
                            </div>

                        </div>

                        <div id="diagnostico" class="tab-pane fade  @if (ViewBag.tab == "4") { @activaVista; }">

                            <div class="box box-default">
                                <div class="box-header with-border">
                                    <h3 class="box-title">Diagnostico</h3>
                                    <div class="box-tools pull-right">
                                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
                                    </div>
                                </div>
                                <div class="box-body">



                                    <fieldset>
                                        <legend></legend>

                                        <div class="col-md-10">

                                            <div class="form-group col-md-6">
                                                <div class="col-md-3">
                                                    <label>CIE10</label>
                                                </div>
                                                <div class="col-md-9">
                                                    @Html.DropDownList("CIe10", listaCie10, "[NO SELECCIONADO]", new { @class = "form-control select2", @id = "Cie10", @style = "width:100%;" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-6">
                                                <div class="col-md-3">
                                                    <label>Tipo de diagnostico</label>
                                                </div>
                                                <div class="col-md-9">
                                                    @Html.DropDownList("tipoDiagnostico", itemsDiag, "[NO SELECCIONADO]", new { @class = "form-control select2", @id = "Cie10", @style = "width:100%;" })
                                                </div>
                                            </div>

                                        </div>
                                        <div class="col-md-2">

                                            <input type="button" id="AgregaDiagnostico" class="btn btn-danger" value="Agregar" />

                                        </div>

                                        @if (Listadiagnostico != null)
                                        {

                                            <div class="col-md-12" style="margin-top:3%">

                                                <div class="box-header">
                                                    <h3 class="box-title">Lista de Diagnosticos</h3>
                                                </div>
                                                <div class="box-body">
                                                    <table id="example4" class="table table-bordered table-striped">
                                                        <thead>
                                                            <tr class="headTabla">
                                                                <th>CIE10</th>
                                                                <th>Descripcion</th>
                                                                <th><i class="fa fa-trash"></i></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>



                                                            @foreach (var item in Listadiagnostico)
                                                            {

                                                                <tr>
                                                                    <td>@Html.DisplayFor(modelItem => item.CIe10)</td>
                                                                    <td>@Html.DisplayFor(modelItem => item.Descripcion)</td>
                                                                    <td><button class="EliminaDiagnostico" name="EliminaDiagnostico" value="@item.CIe10"><i class="fa fa-trash"></i></button></td>
                                                                </tr>

                                                            }

                                                        </tbody>

                                                    </table>
                                                </div>

                                            </div>
                                        }

                                    </fieldset>
                                </div>
                            </div>

                        </div>


                        <div id="examenAuxiliar" class="tab-pane fade  @if (ViewBag.tab == "5") { @activaVista; }">

                            <div class="box box-default">
                                <div class="box-header with-border">
                                    <h3 class="box-title">Examen Auxiliar</h3>
                                    <div class="box-tools pull-right">
                                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
                                    </div>
                                </div>


                                <div class="box-body">



                                    <fieldset>
                                        <legend></legend>

                                        <div class="col-md-12">

                                            <div class="form-group col-md-3">
                                                <div class="col-md-12">
                                                    <label>Especialidad</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.DropDownList("Especialidad", listaEspecialidad, "[NO SELECCIONADO]", new { @class = "form-control select2", @id = "Especialidad", @style = "width:100%;" })
                                                </div>
                                            </div>


                                            <div class="form-group col-md-3">
                                                <div class="col-md-12">
                                                    <label>Tarifa</label>
                                                </div>
                                                <div class="col-md-12">
                                                    <select name="TarifaExamen" style="width:100%" id="TarifaExamen" class="form-control select2" data-placeholder="[NO SELECCIONADO]" required></select>
                                                </div>
                                            </div>

                                            <div class="form-group col-md-3">
                                                <div class="col-md-12">
                                                    <label>Cantidad</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.EditorFor(model => model.cant, new { htmlAttributes = new { @class = "form-control" } })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-3">
                                                <div class="col-md-12">
                                                    <label>Otros</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.EditorFor(model => model.Otros, new { htmlAttributes = new { @class = "form-control" } })
                                                </div>
                                            </div>


                                        </div>

                                        <div class="col-md-12" align="center" style="margin-top:3%">

                                            <input type="button" id="AgregarExamenAuxiliar" class="btn btn-danger" value="Agregar" />

                                        </div>

                                        @if (ListaExamenAuxiliar != null)
                                        {

                                            <div class="col-md-12" style="margin-top:3%">

                                                <div class="box-header">
                                                    <h3 class="box-title">Lista de Examenes auxiliares</h3>
                                                </div>
                                                <div class="box-body">
                                                    <table id="example4" class="table table-bordered table-striped">
                                                        <thead>
                                                            <tr class="headTabla">
                                                                <th>Especialida</th>
                                                                <th>Tarifa</th>
                                                                <th>Cantidad</th>
                                                                <th>Otros</th>
                                                                <th><i class="fa fa-trash"></i></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>


                                                            @foreach (var item in ListaExamenAuxiliar)
                                                            {

                                                                <tr>
                                                                    <td>@Html.DisplayFor(modelItem => item.DescrEspecialidad)</td>
                                                                    <td>@Html.DisplayFor(modelItem => item.DescrTarifaExamen)</td>
                                                                    <td>@Html.DisplayFor(modelItem => item.cant)</td>
                                                                    <td>@Html.DisplayFor(modelItem => item.Otros)</td>
                                                                    <td><button class="EliminaExamen" name="EliminaExamen" value="@item.idSesionExamen"><i class="fa fa-trash"></i></button></td>
                                                                </tr>

                                                                cuentaExamen++;
                                                            }

                                                        </tbody>

                                                    </table>
                                                </div>

                                            </div>

                                        }

                                    </fieldset>
                                </div>

                            </div>

                        </div>


                        <div id="recetas" class="tab-pane fade  @if (ViewBag.tab == "6") { @activaVista; }">

                            <div class="box box-default">
                                <div class="box-header with-border">
                                    <h3 class="box-title">Recetas / Interconsulta</h3>
                                    <div class="box-tools pull-right">
                                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
                                    </div>
                                </div>


                                <div class="box-body">





                                    <div class="col-md-12">

                                        <fieldset>
                                            <legend>Interconsulta</legend>

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <div class="col-md-12">
                                                        <label>Interconsulta</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.InterConsulta, new { htmlAttributes = new { @class = "form-control", @id = "fruits" } })
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <div class="col-md-12">
                                                        <label>Fecha de prox. cita</label>
                                                    </div>
                                                    <div class="col-md-12">
                                                        @Html.EditorFor(model => model.ProxCita, new { htmlAttributes = new { @class = "form-control datepicker" } })
                                                    </div>
                                                </div>
                                            </div>

                                        </fieldset>

                                        <fieldset>
                                            <legend>Receta</legend>


                                            <div class="form-group col-md-3">
                                                <div class="col-md-12">
                                                    <label>Descripcion</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.EditorFor(model => model.Descripcion, new { htmlAttributes = new { @class = "form-control", @id="descripcionReceta" } })
                                                </div>
                                            </div>


                                            <div class="form-group col-md-2">
                                                <div class="col-md-12">
                                                    <label>Concentracion</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.EditorFor(model => model.Concentra, new { htmlAttributes = new { @class = "form-control", @id = "ConcentracionReceta" } })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-2">
                                                <div class="col-md-12">
                                                    <label>Forma Farmec.</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.DropDownList("FormaFarmec", listaFormaFarm, new { @class = "form-control select2", @id = "FormaFarmec", @style = "width:100%;" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-2">
                                                <div class="col-md-12">
                                                    <label>Dosis</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.EditorFor(model => model.Dosis, new { htmlAttributes = new { @class = "form-control", @id="dosis" } })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-3">
                                                <div class="col-md-12">
                                                    <label>Frecuencia</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.DropDownList("Frecuencia", listaFrecuencia, new { @class = "form-control select2", @id = "Frecuencia", @style = "width:100%;" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-3">
                                                <div class="col-md-12">
                                                    <label>Via Administracion</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.DropDownList("ViaAdmin", items, "[NO SELECCIONADO]", new { @class = "form-control select2", @id = "Cie10", @style = "width:100%;" })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-2">
                                                <div class="col-md-12">
                                                    <label>Duracion</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.EditorFor(model => model.Duracion, new { htmlAttributes = new { @class = "form-control", @id="duracion" } })
                                                </div>
                                            </div>


                                            <div class="form-group col-md-2">
                                                <div class="col-md-12">
                                                    <label>Cantidad</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.EditorFor(model => model.Cantidad, new { htmlAttributes = new { @class = "form-control", @id="cantidadReceta" } })
                                                </div>
                                            </div>

                                            <div class="form-group col-md-5">
                                                <div class="col-md-12">
                                                    <label>Observaciones</label>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.EditorFor(model => model.Obsv, new { htmlAttributes = new { @class = "form-control", @id="obsReceta" } })
                                                </div>
                                            </div>

                                        </fieldset>
                                    </div>

                                    <div class="col-md-12" align="center" style="margin-top:3%">

                                        <input type="submit" class="btn btn-danger" id="AgregarReceta" value="Agregar receta" />

                                    </div>
                                    @if (ListaRecetas != null)
                                    {
                                        <div class="col-md-12" style="margin-top:3%">

                                            <div class="box-header">
                                                <h3 class="box-title">Lista de Recetas</h3>
                                            </div>
                                            <div class="box-body">
                                                <table id="example4" class="table table-bordered table-striped">
                                                    <thead>
                                                        <tr class="headTabla">
                                                            <th>Descripcion</th>
                                                            <th>Consentración</th>
                                                            <th>Forma Farmec.</th>
                                                            <th>Dosis</th>
                                                            <th>Fecuencia</th>
                                                            <th>Via Administracion</th>
                                                            <th>Duracion</th>
                                                            <th>Cantidad</th>
                                                            <th>Obvs.</th>
                                                            <th><i class="fa fa-trash"></i></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>


                                                        @foreach (var item in ListaRecetas)
                                                        {
                                                            VgSalud.Controllers.RecetasController re = new VgSalud.Controllers.RecetasController();
                                                            VgSalud.Models.E_FormaFarmaceutica ff = re.ListadoFormaFarmaceutica().Find(x => x.idFormFarm == item.FormaFarmec);
                                                            VgSalud.Models.E_FrecuenciaReceta fr = re.ListadoFrecuenciaRecetas().Find(x => x.idFrec == item.Frecuencia);

                                                            <tr>
                                                                <td>@Html.DisplayFor(modelItem => item.Descripcion)</td>
                                                                <td>@Html.DisplayFor(modelItem => item.Concentra)</td>
                                                                <td>@Html.DisplayFor(modelItem => ff.Descripcion)</td>
                                                                <td>@Html.DisplayFor(modelItem => item.Dosis)</td>
                                                                <td>@Html.DisplayFor(modelItem => fr.Descripcion)</td>
                                                                <td>@Html.DisplayFor(modelItem => item.ViaAdmin)</td>
                                                                <td>@Html.DisplayFor(modelItem => item.Duracion)</td>
                                                                <td>@Html.DisplayFor(modelItem => item.Cantidad)</td>
                                                                <td>@Html.DisplayFor(modelItem => item.Obsv)</td>
                                                                <td><button class="EliminaReceta" name="idRecetaSesion" value="@item.idRecetaSesion"><i class="fa fa-trash"></i></button></td>
                                                            </tr>

                                                        }

                                                    </tbody>

                                                </table>
                                            </div>

                                        </div>

                                    }


                                </div>

                            </div>

                        </div>

                        <div align="center">
                            <input type="button" id="RegistraTodo" value="Registar Ficha Electronica" class="btn btn-info" />
                        </div>

                    </div>

                </form>

            </div>
        </div>
    </section>
</div>

@foreach (var a in ListaUltimaConsulta)
{
    <div class="hidden" id="motivoDes">
        @a.MotivoConsulta
    </div>

    <div class="hidden" id="relatoDes">
        @a.Relato
    </div>

    <div class="hidden" id="InicioDes">
        @a.Inicio
    </div>

    <div class="hidden" id="TiempoEnfDes">
        @a.TiempoEnfermedad
    </div>

    <div class="hidden" id="CursoDes">
        @a.Curso
    </div>
}

<script>

    var data = [
        @foreach (var i in listaEspe) {
            <text>
                "@i.NomEspec",
            </text>
        }
    ];

    $(document).ready(function () {

        var peso = $("#peso").val(); 
        var talla = $("#talla").val();

        $("#peso").keyup(function (e) {
            var peso = this.value;
            var talla = $("#talla").val();
            var imc = peso / (talla * talla);
            imc = imc.toFixed();
            $("#imc").val(imc);

            if(imc<18){
                $("#alertaImc").text("PESO BAJO");
                $("#alertaImc").css('color', '#E8DE07');
                $("#imc").css('background-color', '#E8DE07');
            }
            else if(imc < 25){
                $("#alertaImc").text("NORMAL");
                $("#alertaImc").css('color', '#29DE07');
                $("#imc").css('background-color', '#29DE07');
            }
            else if(imc < 27){
                $("#alertaImc").text("SOBREPESO");
                $("#alertaImc").css('color', '#FF1A82');
                $("#imc").css('background-color', '#FF1A82');
            }
            else if(imc < 30){
                $("#alertaImc").text("OBESIDAD GRADO I");
                $("#alertaImc").css('color', '#FF1A00');
                $("#imc").css('background-color', '#FF1A00');
            }
            else if(imc < 40){
                $("#alertaImc").text("OBESIDAD GRADO II");
                $("#alertaImc").css('color', '#FF1A00');
                $("#imc").css('background-color', '#FF1A00');
            }
            else if(imc > 40){
                $("#alertaImc").text("OBESIDAD GRADO III");
                $("#alertaImc").css('color', '#FF1A00');
                $("#imc").css('background-color', '#FF1A00');
            }            
        });



        $("#talla").keyup(function (e) {
            var talla = this.value;
            var peso = $("#peso").val();
            var imc = peso / (talla * talla);
            imc = imc.toFixed();
            $("#imc").val(imc);

            if (imc < 18) {
                $("#alertaImc").text("PESO BAJO");
                $("#alertaImc").css('color', '#E8DE07');
                $("#imc").css('background-color', '#E8DE07');
            }
            else if (imc < 25) {
                $("#alertaImc").text("NORMAL");
                $("#alertaImc").css('color', '#29DE07');
                $("#imc").css('background-color', '#29DE07');
            }
            else if (imc < 27) {
                $("#alertaImc").text("SOBREPESO");
                $("#alertaImc").css('color', '#FF1A82');
                $("#imc").css('background-color', '#FF1A82');
            }
            else if (imc < 30) {
                $("#alertaImc").text("OBESIDAD GRADO I");
                $("#alertaImc").css('color', '#FF1A00');
                $("#imc").css('background-color', '#FF1A00');
            }
            else if (imc < 40) {
                $("#alertaImc").text("OBESIDAD GRADO II");
                $("#alertaImc").css('color', '#FF1A00');
                $("#imc").css('background-color', '#FF1A00');
            }
            else if (imc > 40) {
                $("#alertaImc").text("OBESIDAD GRADO III");
                $("#alertaImc").css('color', '#FF1A00');
                $("#imc").css('background-color', '#FF1A00');
            }

        });


        $("#ObservacionP").val("@ViewBag.ObservacionP");
        $("#ObservacionF").val("@ViewBag.ObservacionF");

        @foreach(var a in ListaUltimaConsulta){
        <text>
        $('#motivo').popover(
          {
              content: function () {
                  return $('#motivoDes').html();
              },
              html: true,
              placement: 'right',
              trigger: 'hover',
              title: 'Ultima consulta @a.FecRegMed'
          });

        $('#relato').popover(
          {
              content: function () {
                  return $('#relatoDes').html();
              },
              html: true,
              placement: 'left',
              trigger: 'hover',
              title: 'Ultima consulta @a.FecRegMed'
          });

        $('#inicio').popover(
          {
              content: function () {
                  return $('#InicioDes').html();
              },
              html: true,
              placement: 'bottom',
              trigger: 'hover',
              title: 'Ultima consulta @a.FecRegMed'
          });

        $('#tiempoEnf').popover(
          {
              content: function () {
                  return $('#TiempoEnfDes').html();
              },
              html: true,
              placement: 'bottom',
              trigger: 'hover',
              title: 'Ultima consulta @a.FecRegMed'
          });

        $('#curso').popover(
          {
              content: function () {
                  return $('#CursoDes').html();
              },
              html: true,
              placement: 'bottom',
              trigger: 'hover',
              title: 'Ultima consulta @a.FecRegMed'
          });


        </text>
        }


        $("#fruits").autocomplete(data);


        var tipoSexo = "@ViewBag.sexo";

        if (tipoSexo == "SX002") {
            $("#datosGineco").fadeIn();
        } else {
            $("#datosGineco").fadeOut();
        }



        $("#RegistraTodo").click(function () {
            $("#evento").val("1");
            $("#formulario").submit();
        });

        $("#AgregaDiagnostico").click(function () {
            $("#evento").val("2");
            $("#formulario").submit();
        });

        $(".EliminaDiagnostico").click(function () {
            $("#evento").val("3");
            $("#formulario").submit();
        });

        $("#AgregarExamenAuxiliar").click(function () {
            $("#evento").val("4");
            $("#formulario").submit();
        });

        $(".EliminaExamen").click(function () {
            $("#evento").val("5");
            $("#formulario").submit();
        });

        $("#AgregarReceta").click(function () {
            $("#evento").val("6");
            $("#formulario").submit();
        });

        $(".EliminaReceta").click(function () {
            $("#evento").val("7");
            $("#formulario").submit();
        });

        $("#TraerDatos").click(function () {
            $("#evento").val("8");
            $("#formulario").submit();
        });

        var CodEsp = $("select#Especialidad").val();
        $.get('@Url.Action("ObtenerTarifa", "FichaElectronica")', {
            CodEsp: CodEsp
        }, function (response) {
            $('#select2-TarifaExamen-container').empty();
            var select = $('#TarifaExamen');
            select.find('option').remove();
            $('<option>').val("nulo").text("[NO SELECCIONADO]").appendTo(select);
            $("#select2-TarifaExamen-container").text("[NO SELECCIONADO]");
            $.each(response, function (index, value) {
                $('<option>').val(value.CodTar).text(value.DescTar).appendTo(select);
            });
            $('#TarifaExamen option[value=@ViewBag.TarifaExamen]').attr('selected', true);
            $("#select2-TarifaExamen-container").text("@ViewBag.DescrTarifaExamen");
        });



        $('#Especialidad').change(function (event) {
            var CodEsp = $("select#Especialidad").val();
            $.get('@Url.Action("ObtenerTarifa", "FichaElectronica")', {
                CodEsp: CodEsp
            }, function (response) {
                $('#select2-TarifaExamen-container').empty();
                var select = $('#TarifaExamen');
                select.find('option').remove();
                $('<option>').val("nulo").text("[NO SELECCIONADO]").appendTo(select);
                $("#select2-TarifaExamen-container").text("[NO SELECCIONADO]");
                $.each(response, function (index, value) {
                    $('<option>').val(value.CodTar).text(value.DescTar).appendTo(select);
                });
            });
        });


        var borraData = "@ViewBag.borraDatos";

        if (borraData == "1") {
            $("#descripcionReceta").val("");
            $("#ConcentracionReceta").val("");
            $("#dosis").val("");
            $("#duracion").val("");
            $("#cantidadReceta").val("");
            $("#obsReceta").val("");
        }

    });

</script>